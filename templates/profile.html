{% extends 'login_base.html' %}
{% block title %}Signup{% endblock %}
{% block content %}
{% load static %}
    <style>
        .profile-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
        }
        .profile-card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }
        .profile-photo {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .info-label {
            font-weight: 600;
            color: #6c757d;
        }
        .section-title {
            color: #495057;
            border-bottom: 2px solid #667eea;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }
    </style>
<div class="main-content">

    <div class="profile-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-2 text-center">
                    {% if profile.profile_photo %}
                        <img src="{{ profile.profile_photo.url }}" alt="Profile Photo" class="profile-photo">
                    {% else %}
                        <img src="https://via.placeholder.com/150" alt="Default Profile" class="profile-photo">
                    {% endif %}
                </div>
                <div class="col-md-8">
                    <h1>{{ user.get_full_name }}</h1>
                    <p class="lead mb-1">{{ user.get_role_display }}</p>
                    <p class="mb-0">{{ user.email }} â€¢ {{ user.phone }}</p>
                </div>
                <div class="col-md-2 text-end">
                    <a href="{% url 'edit_profile' %}" class="btn btn-light btn-lg">Edit Profile</a>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Basic Information -->
        <div class="card profile-card">
            <div class="card-body">
                <h3 class="section-title">Basic Information</h3>
                <div class="row">
                    <div class="col-md-6">
                        <p><span class="info-label">Username:</span> {{ user.username }}</p>
                        <p><span class="info-label">Email:</span> {{ user.email }}</p>
                        <p><span class="info-label">Phone:</span> {{ user.phone }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><span class="info-label">First Name:</span> {{ user.first_name }}</p>
                        <p><span class="info-label">Last Name:</span> {{ user.last_name }}</p>
                        <p><span class="info-label">Role:</span> {{ user.get_role_display }}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Role Specific Information -->
        {% if user.role == 'intern' and profile %}
        <!-- Intern Specific Details -->
        <div class="card profile-card">
            <div class="card-body">
                <h3 class="section-title">Internship Details</h3>
                <div class="row">
                    <div class="col-md-6">
                        <p><span class="info-label">Intern ID:</span> {{ profile.unique_id }}</p>
                        <p><span class="info-label">Batch:</span> 
                            {% if batch %}
                                {{ batch.name }}
                            {% else %}
                                Not assigned
                            {% endif %}
                        </p>
                        <p><span class="info-label">Course:</span> 
                            {% if course %}
                                {{ course.name }}
                            {% else %}
                                Not assigned
                            {% endif %}
                        </p>
                        <p><span class="info-label">Trainer:</span> 
                            {% if trainer %}
                                <a href="{% url 'trainer_profile' trainer.id %}" class="text-decoration-none">
                                    {{ trainer.user.get_full_name }}
                                </a>
                            {% else %}
                                Not assigned
                            {% endif %}
                        </p>
                    </div>
                    <div class="col-md-6">
                        <p><span class="info-label">Project Title:</span> {{ profile.project_title|default:"Not assigned" }}</p>
                        <p><span class="info-label">Internship Status:</span> 
                            <span class="badge 
                                {% if profile.internship_status == 'Ongoing' %}bg-warning
                                {% elif profile.internship_status == 'Completed' %}bg-success
                                {% else %}bg-danger{% endif %}">
                                {{ profile.get_internship_status_display }}
                            </span>
                        </p>
                        <p><span class="info-label">Device Access:</span> 
                            <span class="badge {% if profile.device_access %}bg-success{% else %}bg-secondary{% endif %}">
                                {{ profile.device_access|yesno:"Yes,No" }}
                            </span>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Academic Information -->
        <div class="card profile-card">
            <div class="card-body">
                <h3 class="section-title">Academic Information</h3>
                <div class="row">
                    <div class="col-md-6">
                        <p><span class="info-label">Qualification:</span> {{ profile.qualification|default:"Not provided" }}</p>
                        <p><span class="info-label">Specialization:</span> {{ profile.specialization|default:"Not provided" }}</p>
                        <p><span class="info-label">College:</span> {{ profile.college|default:"Not provided" }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><span class="info-label">University:</span> {{ profile.university|default:"Not provided" }}</p>
                        <p><span class="info-label">Graduation Year:</span> {{ profile.graduation_year|default:"Not provided" }}</p>
                        <p><span class="info-label">Aggregate Percentage:</span> {{ profile.aggregate_percentage|default:"Not provided" }}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Personal Information -->
        <div class="card profile-card">
            <div class="card-body">
                <h3 class="section-title">Personal Information</h3>
                <div class="row">
                    <div class="col-md-6">
                        <p><span class="info-label">Date of Birth:</span> {{ profile.date_of_birth|default:"Not provided" }}</p>
                        <p><span class="info-label">Gender:</span> {{ profile.gender|default:"Not provided" }}</p>
                        <p><span class="info-label">Address:</span> {{ profile.address|default:"Not provided" }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><span class="info-label">Skills:</span> {{ profile.skills|default:"Not provided" }}</p>
                        <p><span class="info-label">Prior Experience:</span> {{ profile.prior_experience|default:"Not provided" }}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Career Information -->
        <div class="card profile-card">
            <div class="card-body">
                <h3 class="section-title">Career Information</h3>
                <div class="row">
                    <div class="col-md-6">
                        <p><span class="info-label">Why Choose Internship:</span> {{ profile.why_choose|default:"Not provided" }}</p>
                        <p><span class="info-label">Expectations:</span> {{ profile.expectations|default:"Not provided" }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><span class="info-label">Career Goals:</span> {{ profile.career_goals|default:"Not provided" }}</p>
                        <p><span class="info-label">Reference:</span> {{ profile.reference|default:"Not provided" }}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Emergency Contact -->
        <div class="card profile-card">
            <div class="card-body">
                <h3 class="section-title">Emergency & Guardian Information</h3>
                <div class="row">
                    <div class="col-md-6">
                        <p><span class="info-label">Emergency Contact:</span> {{ profile.emergency_contact_name|default:"Not provided" }}</p>
                        <p><span class="info-label">Emergency Phone:</span> {{ profile.emergency_contact_phone|default:"Not provided" }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><span class="info-label">Guardian Name:</span> {{ profile.guardian_name|default:"Not provided" }}</p>
                        <p><span class="info-label">Guardian Contact:</span> {{ profile.guardian_contact|default:"Not provided" }}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Links -->
        <div class="card profile-card">
            <div class="card-body">
                <h3 class="section-title">Professional Links</h3>
                <div class="row">
                    <div class="col-md-6">
                        <p><span class="info-label">LinkedIn:</span> 
                            {% if profile.linkedin_profile %}
                                <a href="{{ profile.linkedin_profile }}" target="_blank">View Profile</a>
                            {% else %}
                                Not provided
                            {% endif %}
                        </p>
                    </div>
                    <div class="col-md-6">
                        <p><span class="info-label">Portfolio:</span> 
                            {% if profile.portfolio_link %}
                                <a href="{{ profile.portfolio_link }}" target="_blank">View Portfolio</a>
                            {% else %}
                                Not provided
                            {% endif %}
                        </p>
                    </div>
                </div>
            </div>
        </div>

        {% elif user.role == 'trainer' and profile %}
        <!-- Trainer Specific Details -->
        <div class="card profile-card">
            <div class="card-body">
                <h3 class="section-title">Professional Information</h3>
                <div class="row">
                    <div class="col-md-6">
                        <p><span class="info-label">Bio:</span> {{ profile.bio|default:"Not provided" }}</p>
                        <p><span class="info-label">Expertise:</span> {{ profile.expertise|default:"Not provided" }}</p>
                        <p><span class="info-label">Designation:</span> {{ profile.designation|default:"Not provided" }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><span class="info-label">Years of Experience:</span> {{ profile.years_of_experience|default:"Not provided" }}</p>
                        <p><span class="info-label">Highest Qualification:</span> {{ profile.highest_qualification|default:"Not provided" }}</p>
                        <p><span class="info-label">Availability:</span> {{ profile.get_availability_display }}</p>
                    </div>
                </div>
            </div>
        </div>

        {% elif user.role == 'admin' and profile %}
        <!-- Admin Specific Details -->
        <div class="card profile-card">
            <div class="card-body">
                <h3 class="section-title">Administrative Information</h3>
                <div class="row">
                    <div class="col-md-6">
                        <p><span class="info-label">Office Location:</span> {{ profile.office_location|default:"Not provided" }}</p>
                    </div>
                </div>
            </div>
        </div>

        {% elif user.role == 'superuser' and profile %}
        <!-- SuperUser Specific Details -->
        <div class="card profile-card">
            <div class="card-body">
                <h3 class="section-title">SuperUser Information</h3>
                <div class="row">
                    <div class="col-md-6">
                        <p><span class="info-label">Privileges:</span> {{ profile.privileges|default:"Not provided" }}</p>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</div>
{% endblock %}